# ====== Core ======
APP_ENV=dev
APP_NAME=CoffeeStudio Platform
APP_TIMEZONE=Europe/Berlin

# ====== Data freshness (defaults) ======
KOOPS_STALE_DAYS=60
ROESTER_STALE_DAYS=90
NEWS_STALE_DAYS=2
FX_STALE_DAYS=2

# ====== Refresh schedules (Europe/Berlin) ======
MARKET_REFRESH_TIMES=07:30,14:00,20:00
NEWS_REFRESH_TIMES=07:30,14:00,20:00

# ====== DB ======
POSTGRES_PASSWORD=coffeestudio
DATABASE_URL=postgresql+psycopg://coffeestudio:coffeestudio@postgres:5432/coffeestudio

# ====== Redis (cache + celery broker) ======
REDIS_URL=redis://redis:6379/0

# ====== Security ======
# ⚠️ WARNUNG: Niemals echte Passwörter in .env oder .env.example committen!
# ⚠️ Für Produktion: Secrets Manager (Vault/AWS Secrets Manager/Azure Key Vault) verwenden!
# REQUIRED. Do not commit real secrets. For local dev you can set any long random string.
JWT_SECRET=
JWT_ISSUER=coffeestudio
JWT_AUDIENCE=coffeestudio-users
ACCESS_TOKEN_EXPIRE_MINUTES=240

# ====== CORS Configuration ======
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ====== Bootstrap Admin ======
# ⚠️ WARNUNG: Niemals echte Passwörter committen!
# ⚠️ Für Produktion: STARKE Passwörter verwenden (min. 16 Zeichen, gemischt)!
# REQUIRED for /auth/dev/bootstrap (idempotent). Must be a valid email.
BOOTSTRAP_ADMIN_EMAIL=admin@coffeestudio.com
# REQUIRED. Setze ein STARKES Passwort (min. 16 Zeichen). Beispiel für lokale Dev: generiere mit `openssl rand -base64 24`
BOOTSTRAP_ADMIN_PASSWORD=
BOOTSTRAP_ADMIN_NAME=Admin

# ====== Machine Learning ======
# Model type for training: "random_forest" (default) or "xgboost"
# Set to "xgboost" to use XGBoost as the default ML backend.
ML_MODEL_TYPE=random_forest

# ====== ICE Realtime Price Feed (optional) ======
# Set REALTIME_PRICE_FEED_ENABLED=true to activate the WebSocket price stream.
# Requires a Twelve Data API key (https://twelvedata.com/) for the fastest updates;
# falls back to Yahoo Finance when no key is provided.
REALTIME_PRICE_FEED_ENABLED=false
TWELVE_DATA_API_KEY=
# How often (in seconds) the Celery beat task refreshes the Redis price cache.
REALTIME_PRICE_PUSH_INTERVAL_S=30
# Percentage threshold for 24-h coffee price volatility alerts (default: 5%).
PRICE_VOLATILITY_ALERT_THRESHOLD=5.0
# Frontend feature flag (must match REALTIME_PRICE_FEED_ENABLED above)
NEXT_PUBLIC_REALTIME_PRICE_FEED_ENABLED=false

# ====== Frontend ======
NEXT_PUBLIC_API_URL=http://localhost:8000

# ====== Perplexity (Sonar) API (optional, needed for /discovery/seed) ======
# Generate a key in your Perplexity account settings.
PERPLEXITY_API_KEY=
PERPLEXITY_BASE_URL=https://api.perplexity.ai
#
# --- Enrichment HTTP allowlists (SSRF protection) ---
# Comma-separated hostnames and/or domain suffixes allowed for web enrichment.
# Example:
# ENRICH_ALLOWED_HOSTS=www.example.com,api.example.org
# ENRICH_ALLOWED_DOMAINS=.example.com,.example.org
ENRICH_ALLOWED_HOSTS=
ENRICH_ALLOWED_DOMAINS=

# ====== OpenAI API (optional, needed for semantic search embeddings) ======
# Generate a key at https://platform.openai.com/api-keys
OPENAI_API_KEY=
EMBEDDING_MODEL=text-embedding-3-small

# === RAG KI-Analyst (Multi-Provider) ===
# Provider: ollama (lokal, kostenlos), openai (Cloud), groq (Cloud, kostenlos)
RAG_PROVIDER=ollama
RAG_LLM_MODEL=llama3.1:8b
RAG_TEMPERATURE=0.3
RAG_MAX_CONTEXT_ENTITIES=10
RAG_MAX_CONVERSATION_HISTORY=20

# Embedding Provider (separate from LLM provider, default: openai for pgvector compatibility)
RAG_EMBEDDING_PROVIDER=openai
RAG_EMBEDDING_MODEL=text-embedding-3-small

# Ollama (Standard - läuft lokal ohne API Key)
OLLAMA_BASE_URL=http://localhost:11434

# Groq (optional - nur wenn RAG_PROVIDER=groq)
# GROQ_API_KEY=gsk_...

# ====== AI-Powered QA System (optional, needed for automated test analysis) ======
# OpenAI API key for AI-powered test failure analysis and auto-fixing
# Generate a key at https://platform.openai.com/api-keys
QA_AI_API_KEY=
QA_AI_MODEL=gpt-4-turbo-preview
QA_AUTO_FIX_ENABLED=false
QA_CONFIDENCE_THRESHOLD=85.0
QA_MAX_FIXES_PER_RUN=5
PERPLEXITY_MODEL_DISCOVERY=sonar-pro
PERPLEXITY_TIMEOUT_SECONDS=60

# --- MAX STACK (optional) ---
GRAFANA_ADMIN_PASSWORD=adminadmin
GRAFANA_ANON_ENABLED=true
GRAFANA_ANON_ROLE=Viewer
TRAEFIK_LOG_LEVEL=INFO
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=adminadmin
N8N_ENCRYPTION_KEY=
LITELLM_MASTER_KEY=
LANGFUSE_NEXTAUTH_SECRET=
LANGFUSE_SALT=
WATCHTOWER_POLL_INTERVAL=86400
